{\rtf1\ansi\ansicpg1252\cocoartf2708
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 <!-- index.html -->\
<!DOCTYPE html>\
<html lang="en">\
<head>\
  <meta charset="UTF-8">\
  <title>Journal Viewer</title>\
  <style>\
    body \{ margin:0; overflow:hidden; background:#f0f0f0 \}\
    canvas \{ display:block \}\
  </style>\
</head>\
<body>\
  <canvas id="cv"></canvas>\
  <script>\
    const canvas = document.getElementById('cv');\
    const ctx = canvas.getContext('2d');\
\
    // size to window\
    function resize()\{\
      canvas.width  = window.innerWidth;\
      canvas.height = window.innerHeight;\
      draw();\
    \}\
    window.addEventListener('resize', resize);\
\
    let data;\
    async function load()\{\
      // adjust path if you put the .jrn somewhere else\
      const resp = await fetch('Journal.jrn');\
      data = await resp.json();\
      resize();\
    \}\
\
    function draw()\{\
      if (!data) return;\
      // clear\
      ctx.fillStyle = data.background;\
      ctx.fillRect(0,0,canvas.width,canvas.height);\
\
      // scale so 10000\'d710000 scene fits into the viewport\
      const scale = Math.min(\
        canvas.width  / 10000, \
        canvas.height / 10000\
      );\
      ctx.save();\
      ctx.translate(canvas.width/2, canvas.height/2);\
      ctx.scale(scale, scale);\
      ctx.translate(-5000, -5000);\
\
      // draw items in order\
      for (const itm of data.items) \{\
        if (itm.type === 'image') \{\
          const img = new Image();\
          img.src = 'data:image/png;base64,' + itm.b64;\
          img.onload = () => \{\
            ctx.drawImage(\
              img,\
              itm.x, itm.y,\
              img.width * itm.scale,\
              img.height * itm.scale\
            );\
          \};\
        \} else if (itm.type === 'text') \{\
          ctx.fillStyle = 'black';\
          ctx.font = '16px Courier New';\
          ctx.fillText(itm.text, itm.x, itm.y + 16);\
        \}\
      \}\
      ctx.restore();\
    \}\
\
    load();\
  </script>\
</body>\
</html>\
}